import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as t,c as s,f as e}from"./app-8da2a3ac.js";const a="/swag-main.png",o="/swag-api.png",i={},l=e(`<h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><p>下载 swagger 关联的库</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> $ go get <span class="token parameter variable">-u</span> github.com/swaggo/swag/cmd/swag     <span class="token comment"># 命令行工具                          </span>
 $ go get <span class="token parameter variable">-u</span> github.com/swaggo/gin-swagger          
 $ go get <span class="token parameter variable">-u</span> github.com/swaggo/files
 
 $ go <span class="token function">install</span> github.com/swaggo/swag/cmd/swag    <span class="token comment"># 编译生产可执行文件放入$GOPATH/bin</span>
 $ swag <span class="token parameter variable">-v</span>
 <span class="token operator">&gt;</span> swag version v1.8.12
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加注释并拉起服务后，浏览器访问 <code>http://&lt;host&gt;:&lt;port&gt;/swagger/index.html</code></p><h2 id="通用注解" tabindex="-1"><a class="header-anchor" href="#通用注解" aria-hidden="true">#</a> 通用注解</h2><p>go swagger 通过注释绑定接口设置和显示内容</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;github.com/gin-gonic/gin&quot;</span>                   <span class="token comment">// 引入 gin</span>
    swaggerFiles <span class="token string">&quot;github.com/swaggo/files&quot;</span>      
    ginSwagger <span class="token string">&quot;github.com/swaggo/gin-swagger&quot;</span>
    <span class="token string">&quot;net/http&quot;</span>
    <span class="token boolean">_</span> <span class="token string">&quot;swag/docs&quot;</span>                                <span class="token comment">// &lt;projectName&gt;/docs  swag 替换为项目名称</span>
<span class="token punctuation">)</span>

<span class="token comment">// @title           Swagger</span>
<span class="token comment">// @version         1.0.0</span>
<span class="token comment">// @description     Swagger Test</span>
<span class="token comment">// @host            10.58.14.96:8080</span>
<span class="token comment">// @BasePath        /</span>
<span class="token comment">// @schemes         http https</span>

<span class="token comment">// @contact.name    facsert</span>
<span class="token comment">// @contact.url     https://facsert.github.io/</span>
<span class="token comment">// @contact.email   facsert@outlook.com</span>

<span class="token comment">// @termsOfService  http://swagger.io/terms/</span>
<span class="token comment">// @license.name    Apache 2.0</span>
<span class="token comment">// @license.url     http://www.apache.org/licenses/LICENSE-2.0.html</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    engine <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    engine<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/root&quot;</span><span class="token punctuation">,</span> webRoot<span class="token punctuation">)</span>
    engine<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/index&quot;</span><span class="token punctuation">,</span> webIndex<span class="token punctuation">)</span>
    engine<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/swagger/*any&quot;</span><span class="token punctuation">,</span> ginSwagger<span class="token punctuation">.</span><span class="token function">WrapHandler</span><span class="token punctuation">(</span>swaggerFiles<span class="token punctuation">.</span>Handler<span class="token punctuation">)</span><span class="token punctuation">)</span>
    engine<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">&quot;:8080&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+a+`" alt="main" tabindex="0" loading="lazy"><figcaption>main</figcaption></figure><table><thead><tr><th style="text-align:left;">字段</th><th style="text-align:left;">说明</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;"><code>@title</code></td><td style="text-align:left;">(必填)大标题</td><td style="text-align:left;"><code>Swagger</code></td></tr><tr><td style="text-align:left;"><code>@version</code></td><td style="text-align:left;">(必填)版本</td><td style="text-align:left;"><code>1.0.0</code></td></tr><tr><td style="text-align:left;"><code>@description</code></td><td style="text-align:left;">描述</td><td style="text-align:left;"><code>Swagger Test</code></td></tr><tr><td style="text-align:left;"><code>@host</code></td><td style="text-align:left;">运行服务主机 IP 地址</td><td style="text-align:left;"><code>10.58.14.96:8080</code></td></tr><tr><td style="text-align:left;"><code>@BasePath</code></td><td style="text-align:left;">API基本路径(会添加在所有API路由前)</td><td style="text-align:left;"><code>/</code></td></tr><tr><td style="text-align:left;"><code>@schemes</code></td><td style="text-align:left;">请求的传输协议</td><td style="text-align:left;"><code>http https</code></td></tr><tr><td style="text-align:left;"><code>@contact.name</code></td><td style="text-align:left;">联系人信息</td><td style="text-align:left;"><code>facsert</code></td></tr><tr><td style="text-align:left;"><code>@contact.url</code></td><td style="text-align:left;">联系人信息网址</td><td style="text-align:left;"><code>https://facsert.github.io/</code></td></tr><tr><td style="text-align:left;"><code>@contact.email</code></td><td style="text-align:left;">联系人邮件</td><td style="text-align:left;"><code>facsert@outlook.com</code></td></tr><tr><td style="text-align:left;"><code>@termsOfService</code></td><td style="text-align:left;">API服务条款</td><td style="text-align:left;"><code>http://swagger.io/terms/</code></td></tr><tr><td style="text-align:left;"><code>@license.name</code></td><td style="text-align:left;">(必填)API许可证名称</td><td style="text-align:left;"><code>Apache 2.0</code></td></tr><tr><td style="text-align:left;"><code>@license.url</code></td><td style="text-align:left;">API许可证网址</td><td style="text-align:left;"><code>http://www.apache.org/licenses/LICENSE-2.0.html</code></td></tr></tbody></table><p>部分字段如 <code>@title</code> <code>@version</code> <code>@license.name</code> 是必填字段，字段首字母不区分大小写<br> 其余字段可填，可不填写</p><h2 id="api注解" tabindex="-1"><a class="header-anchor" href="#api注解" aria-hidden="true">#</a> API注解</h2><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// @tags     Router</span>
<span class="token comment">// @id       root</span>
<span class="token comment">// @summary  &quot;root page&quot;</span>
<span class="token comment">// @Produce  json</span>
<span class="token comment">// @Success  200 {object} string &quot;response with root page&quot;</span>
<span class="token comment">// @Failure  400 {object} string &quot;response with root page fail&quot;</span>
<span class="token comment">// @Router   /  [get]</span>
<span class="token keyword">func</span> <span class="token function">webRoot</span><span class="token punctuation">(</span>context <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> <span class="token string">&quot;this is root page&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+o+`" alt="main" tabindex="0" loading="lazy"><figcaption>main</figcaption></figure><table><thead><tr><th style="text-align:left;">字段</th><th style="text-align:left;">说明</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;"><code>@tags</code></td><td style="text-align:left;">一组API的组名</td><td style="text-align:left;"><code>User</code></td></tr><tr><td style="text-align:left;"><code>@id</code></td><td style="text-align:left;">API唯一标识</td><td style="text-align:left;"><code>root page</code></td></tr><tr><td style="text-align:left;"><code>@summary</code></td><td style="text-align:left;">API简短描述</td><td style="text-align:left;"><code>show info</code></td></tr><tr><td style="text-align:left;"><code>@Router</code></td><td style="text-align:left;">(必填)路由和请求方法</td><td style="text-align:left;"><code>/root/user [get]</code></td></tr><tr><td style="text-align:left;"><code>@Param</code></td><td style="text-align:left;">接口参数</td><td style="text-align:left;"><code>name path string true &quot;username&quot;</code></td></tr><tr><td style="text-align:left;"><code>@Accept</code></td><td style="text-align:left;">请求体的MIME类型数据</td><td style="text-align:left;"><code>json</code></td></tr><tr><td style="text-align:left;"><code>@Produce</code></td><td style="text-align:left;">响应体的MIME类型数据</td><td style="text-align:left;"><code>json</code></td></tr><tr><td style="text-align:left;"><code>@Success</code></td><td style="text-align:left;">响应成功内容</td><td style="text-align:left;"><code>200 {object} string &quot;response success&quot;</code></td></tr><tr><td style="text-align:left;"><code>@Failure</code></td><td style="text-align:left;">响应失败内容</td><td style="text-align:left;"><code>400 {object} string &quot;response fail&quot;</code></td></tr><tr><td style="text-align:left;"><code>@Response</code></td><td style="text-align:left;">响应失败内容</td><td style="text-align:left;"><code>500 {object} string &quot;response fail&quot;</code></td></tr></tbody></table><p>部分字段如 <code>@Router</code> 是必填字段，缺失则不显示，字段首字母不区分大小写<br> 其余字段根据不同接口影响功能测试</p><h3 id="mime-类型" tabindex="-1"><a class="header-anchor" href="#mime-类型" aria-hidden="true">#</a> MIME 类型</h3><p><code>MIME</code> 类型即请求体和响应体的类型</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// @Accept  application/json                   请求体是 json 类型数据          </span>
<span class="token comment">// @Accept  application/xml                    请求体是 XML 格式数据</span>
<span class="token comment">// @Accept  application/x-www-form-urlencoded  请求体是表单类型</span>
<span class="token comment">// @Produce text/plain                         响应纯文本数据</span>
<span class="token comment">// @Produce text/html                          响应 HTML 数据</span>
<span class="token comment">// @Produce application/octet-stream           响应二进制流数据, 返回客户端需要下载的文件</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="响应" tabindex="-1"><a class="header-anchor" href="#响应" aria-hidden="true">#</a> 响应</h3><p><code>@Response {return Code} {param type} {date type} commit</code></p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// @Success 200     {array}  model.Account          </span>
<span class="token comment">// @Header  200     {string} Token &quot;qwerty&quot;</span>
<span class="token comment">// @Failure 400,404 {object} httputil.HTTPError</span>
<span class="token comment">// @Failure default {object} httputil.DefaultError</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="参数" tabindex="-1"><a class="header-anchor" href="#参数" aria-hidden="true">#</a> 参数</h3><p><code>@Parma name locate type need description attribute</code> API 参数信息和约束</p><ul><li>name: 参数名</li><li>locate: 参数位置（path, query, header, body 或 formData）</li><li>type: 参数的数据类型(可以使用自定义类型)</li><li>need: 是否必须</li><li>description: 参数的描述</li><li>attribute: 属性(选填), 根据类型可以限定最大最小值, 长度, 格式等</li></ul><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// @Param userId   path     int    true &quot;UserID&quot;    minimum(0) minimum(9)</span>
<span class="token comment">// @Param username query    string true &quot;Username&quot;  minLength(0) maxLength(9)  </span>
<span class="token comment">// @Param levle    path     int    true &quot;Levle&quot;     enums(1, 2, 3)</span>
<span class="token comment">// @Param user     body     User   true &quot;User&quot;         </span>
<span class="token comment">// @Param file     formData file   true &quot;File upload&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="路由" tabindex="-1"><a class="header-anchor" href="#路由" aria-hidden="true">#</a> 路由</h3><p><code>@Router path [httpMethod]</code></p><p>静态路由: 固定路由，不会发生改变</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    engine<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/index/static&quot;</span><span class="token punctuation">,</span> static<span class="token punctuation">)</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token comment">// @Tags    User</span>
<span class="token comment">// @summary static router</span>
<span class="token comment">// @Router  /index/static  [get]</span>
<span class="token keyword">func</span> <span class="token function">static</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    c<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> <span class="token string">&quot;static page&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>动态路由: 路由中存在参数</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    engine<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/index/:name/:attribute&quot;</span><span class="token punctuation">,</span> detail<span class="token punctuation">)</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token comment">// @Tags    User</span>
<span class="token comment">// @summary user api</span>
<span class="token comment">// @Param   name path string true &quot;name&quot;</span>
<span class="token comment">// @Param   attribute path string true &quot;attribute name&quot;</span>
<span class="token comment">// @Router  /index/{name}/{attribute}  [get]</span>
<span class="token keyword">func</span> <span class="token function">detail</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>
    attr <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">&quot;attribute&quot;</span><span class="token punctuation">)</span>
    c<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> <span class="token string">&quot;name:%s attribute:%s&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> attr<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,31),c=[l];function d(p,u){return t(),s("div",null,c)}const g=n(i,[["render",d],["__file","go-swagger.html.vue"]]);export{g as default};
